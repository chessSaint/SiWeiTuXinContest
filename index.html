<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
       <link href="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.css" rel="stylesheet" type="text/css" />
       <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=WYbWDwS8NW7EuxFGqhdYlsF120PhYdSn"></script>
       <script type="text/javascript" src="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js"></script>
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>    <!--下面那个引用也可-->
       <!-- <script src="bmap.min.js"></script> -->
       <script src="coordtransform.js"></script>
       <script type="text/javascript">
        var center0 = [106.633555, 35.21041];

        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        option = null;

        gpsData0 = [
            [
                [106.642735,35.2163],
                [106.642698,35.2163],
                [106.642663,35.2163],
                [106.642623,35.2163],
                [106.642597,35.2163],
                [106.642572,35.2163],
                [106.642547,35.2162],
                [106.642525,35.2162],
                [106.642503,35.2162],
                [106.642478,35.2162],
                [106.64246,35.21625],
                [106.642347,35.2162],
                [106.642373,35.2162],
                [106.642383,35.2161],
                [106.642382,35.2161],
                [106.642387,35.2161],
                [106.642378,35.2161],
                [106.642385,35.2161],
                [106.642385,35.2161],
                [106.642397,35.2161],
                [106.64243,35.21613],
                [106.642458,35.2161],
                [106.642462,35.2161],
                [106.642475,35.2161],
                [106.642483,35.2161],
                [106.642498,35.2160],
                [106.642512,35.2160],
                [106.642512,35.2160],
                [106.642513,35.2160],
                [106.642513,35.2160],
                [106.642523,35.2160],
                [106.642528,35.2160],
                [106.64253,35.21603],
                [106.642527,35.2160],
                [106.642512,35.2160],
                [106.642475,35.2159],
                [106.64244,35.21598],
                [106.6424,35.215965],
                [106.642357,35.2159],
                [106.642308,35.2159],
                [106.642263,35.2159],
                [106.642212,35.2158],
                [106.642157,35.2158],
                [106.642102,35.2158],
                [106.642042,35.2158],
                [106.641978,35.2157],
                [106.641913,35.2157],
                [106.64185,35.21572],
                [106.641792,35.2156],
                [106.64173,35.21567],
                [106.64167,35.21565],
                [106.64161,35.21563],
                [106.64155,35.21560],
                [106.64149,35.21558],
                [106.641427,35.2155],
                [106.641365,35.2155],
                [106.641302,35.2155],
                [106.641233,35.2154],
                [106.641177,35.2154],
                [106.641115,35.2154],
                [106.64105,35.21543],
                [106.640985,35.2154],
                [106.64092,35.21538],
                [106.640855,35.2153],
                [106.64079,35.21533],
                [106.640722,35.2153],
                [106.640653,35.2152],
                [106.640588,35.2152],
                [106.64052,35.21525],
                [106.640453,35.2152],
                [106.640387,35.2151],
                [106.640317,35.2151],
                [106.640242,35.2151],
                [106.640165,35.2151],
                [106.640098,35.2151],
                [106.640033,35.2150],
                [106.63997,35.21505],
                [106.639908,35.2150],
                [106.639853,35.2150],
                [106.6398,35.214992],
                [106.639745,35.2149],
                [106.639683,35.2149],
                [106.63962,35.21492],
                [106.639555,35.2148],
                [106.639493,35.2148],
                [106.639435,35.2148],
                [106.639378,35.2148],
                [106.639322,35.2148],
                [106.639268,35.2147],
                [106.639225,35.2147],
                [106.639187,35.2147],
                [106.639157,35.2147],
                [106.639142,35.2146],
                [106.639137,35.2146],
                [106.639137,35.2145],
                [106.639142,35.2145],
                [106.63916,35.21448],
                [106.63918,35.21443],
                [106.639203,35.2143],
                [106.639223,35.2143],
                [106.639242,35.2142],
                [106.639265,35.2142],
                [106.639293,35.2141],
                [106.639323,35.2140],
                [106.639357,35.2140],
                [106.639387,35.2139],
                [106.639418,35.2139],
                [106.63945,35.21385],
                [106.639478,35.2137],
                [106.639508,35.2137],
                [106.63954,35.21366],
                [106.639568,35.2136],
                [106.6396,35.213537],
                [106.639625,35.2134],
                [106.639657,35.2134],
                [106.639693,35.2133],
                [106.639722,35.2132],
                [106.639752,35.2132],
                [106.63981,35.21315],
                [106.639843,35.2130],
                [106.639878,35.2130],
                [106.63991,35.21297],
                [106.63994,35.21291],
                [106.639973,35.2128],
                [106.640003,35.2128],
                [106.640035,35.2127],
                [106.640065,35.2126],
                [106.640097,35.2126],
                [106.640132,35.2125],
                [106.640168,35.2124],
                [106.640202,35.2124],
                [106.640237,35.2123],
                [106.640275,35.2122],
                [106.640315,35.2122],
                [106.640353,35.2121],
                [106.64039,35.21207],
                [106.640422,35.2120],
                [106.64045,35.21193],
                [106.640475,35.2118],
                [106.640513,35.2118],
                [106.640535,35.2117],
                [106.640552,35.2117],
                [106.640563,35.2116],
                [106.64057,35.21160],
                [106.640563,35.2115],
                [106.640542,35.2115],
                [106.640513,35.2114],
                [106.640473,35.2114],
                [106.640428,35.2113],
                [106.640368,35.2113],
                [106.640295,35.2113],
                [106.640205,35.2112],
                [106.640108,35.2112],
                [106.640012,35.2112],
                [106.639917,35.2111],
                [106.639813,35.2111],
                [106.63971,35.21112],
                [106.63961,35.21108],
                [106.639507,35.2110],
                [106.639407,35.2110],
                [106.639302,35.2109],
                [106.639198,35.2109],
                [106.639093,35.2109],
                [106.638985,35.2108],
                [106.638877,35.2108],
                [106.638777,35.2108],
                [106.63868,35.21076],
                [106.638583,35.2107],
                [106.638483,35.2107],
                [106.63839,35.21066],
                [106.638295,35.2106],
                [106.638197,35.2105],
                [106.638095,35.2105],
                [106.637993,35.2105],
                [106.637892,35.2104],
                [106.637792,35.2104],
                [106.637695,35.2104],
                [106.637593,35.2103],
                [106.637493,35.2103],
                [106.637397,35.2102],
                [106.6373,35.210258],
                [106.637207,35.2102],
                [106.63711,35.21017],
                [106.637018,35.2101],
                [106.63693,35.21009],
                [106.63685,35.21005],
                [106.636765,35.2100],
                [106.63668,35.20998],
                [106.636602,35.2099],
                [106.636532,35.2099],
                [106.636462,35.2099],
                [106.636383,35.2098],
                [106.636297,35.2098],
                [106.636202,35.2098],
                [106.636107,35.2097],
                [106.636007,35.2097],
                [106.635907,35.2096],
                [106.635798,35.2096],
                [106.635682,35.2096],
                [106.635575,35.2095],
                [106.635458,35.2095],
                [106.635332,35.2095],
                [106.635207,35.2094],
                [106.635087,35.2094],
                [106.634967,35.2093],
                [106.63485,35.20932],
                [106.634735,35.2092],
                [106.634623,35.2092],
                [106.634513,35.2092],
                [106.634403,35.2091],
                [106.634295,35.2091],
                [106.634187,35.2090],
                [106.634083,35.2090],
                [106.633985,35.2090],
                [106.633892,35.2089],
                [106.633802,35.2089],
                [106.633712,35.2089],
                [106.633628,35.2088],
                [106.633545,35.2088],
                [106.63346,35.20883],
                [106.633373,35.2088],
                [106.633285,35.2087],
                [106.633195,35.2087],
                [106.633103,35.2087],
                [106.633013,35.2086],
                [106.632918,35.2086],
                [106.632823,35.2086],
                [106.632728,35.2085],
                [106.632635,35.2085],
                [106.63254,35.20850],
                [106.632445,35.2084],
                [106.63235,35.20843],
                [106.632253,35.2084],
                [106.632158,35.2083],
                [106.632062,35.2083],
                [106.631963,35.2083],
                [106.631863,35.2082],
                [106.631768,35.2082],
                [106.631675,35.2081],
                [106.631583,35.2081],
                [106.631488,35.2081],
                [106.63139,35.20808],
                [106.631293,35.2080],
                [106.631198,35.2080],
                [106.631103,35.2079],
                [106.631007,35.2079],
                [106.630908,35.2079],
                [106.63081,35.20786],
                [106.63071,35.20782],
                [106.630612,35.2077],
                [106.630515,35.2077],
                [106.630418,35.2077],
                [106.630323,35.2076],
                [106.630228,35.2076],
                [106.630133,35.2076],
                [106.630032,35.2075],
                [106.62994,35.20753],
                [106.629852,35.2075],
                [106.629763,35.2074],
                [106.629677,35.2074],
                [106.629595,35.2074],
                [106.629517,35.2074],
                [106.629438,35.2073],
                [106.629363,35.2073],
                [106.62929,35.20733],
                [106.629217,35.2073],
                [106.629145,35.2072],
                [106.629073,35.2072],
                [106.629003,35.2072],
                [106.628938,35.2072],
                [106.628872,35.2071],
                [106.628805,35.2071],
                [106.628742,35.2071],
                [106.628677,35.2071],
                [106.628612,35.2070],
                [106.628545,35.2070],
                [106.628478,35.2070],
                [106.628413,35.2070],
                [106.628353,35.2069],
                [106.628298,35.2069],
                [106.628252,35.2069],
                [106.62821,35.20695],
                [106.62818,35.20694],
                [106.628168,35.2069],
                [106.628172,35.2069]
            ],
            [
                [106.613555,35.20041],
                [106.613588,35.20046],
                [106.613622,35.20052],
                [106.613652,35.20059],
                [106.613682,35.20065],
                [106.613717,35.20072],
                [106.613755,35.20078],
                [106.613793,35.20085],
                [106.61384,35.200903],
                [106.613887,35.20095],
                [106.613925,35.20101],
                [106.613962,35.20106],
                [106.614,35.201117  ],
                [106.614037,35.20116],
                [106.614067,35.20119],
                [106.614098,35.20122],
                [106.614128,35.20125],
                [106.614175,35.20126],
                [106.614218,35.20126],
                [106.614268,35.20126],
                [106.614323,35.20127],
                [106.614378,35.20127],
                [106.614438,35.20128],
                [106.614508,35.20128],
                [106.614587,35.20129],
                [106.614668,35.20129],
                [106.614757,35.20130],
                [106.614848,35.20131],
                [106.614948,35.20131],
                [106.61505,35.20132 ],
                [106.615147,35.20132],
                [106.615242,35.20133],
                [106.615335,35.20133],
                [106.61543,35.201342],
                [106.61553,35.201352],
                [106.615632,35.20136],
                [106.615735,35.20137],
                [106.615838,35.20138],
                [106.615942,35.20139],
                [106.616048,35.20139],
                [106.616155,35.20140],
                [106.616267,35.20141],
                [106.616377,35.20141],
                [106.616488,35.20142],
                [106.616603,35.20142],
                [106.616718,35.20143],
                [106.616833,35.20144],
                [106.616948,35.20145],
                [106.617065,35.20146],
                [106.617177,35.20146],
                [106.617285,35.20147],
                [106.617397,35.20148],
                [106.617512,35.20148],
                [106.617623,35.20149],
                [106.61774,35.201505],
                [106.617857,35.20151],
                [106.617973,35.20152],
                [106.618088,35.20154],
                [106.6182,35.201558 ],
                [106.618317,35.20158],
                [106.61843,35.201607],
                [106.618538,35.20163],
                [106.618647,35.20165],
                [106.618753,35.20168],
                [106.61886,35.201708],
                [106.618963,35.20173],
                [106.619067,35.20175],
                [106.619165,35.20178],
                [106.619265,35.20180],
                [106.619358,35.20182],
                [106.619452,35.20185],
                [106.619547,35.20187],
                [106.619642,35.20189],
                [106.61974,35.201925],
                [106.619828,35.20194],
                [106.61992,35.201972],
                [106.62001,35.201995],
                [106.620102,35.20201],
                [106.620192,35.20204],
                [106.620282,35.20206],
                [106.620372,35.20208],
                [106.62046,35.202102],
                [106.620547,35.20212],
                [106.620635,35.20214],
                [106.62072,35.20216 ],
                [106.620807,35.20218],
                [106.620895,35.20219],
                [106.620983,35.20221],
                [106.621072,35.20223],
                [106.621162,35.20225],
                [106.621253,35.20227],
                [106.621343,35.20229],
                [106.621433,35.20232],
                [106.621525,35.20234],
                [106.621618,35.20236],
                [106.62171,35.202393],
                [106.621802,35.20241],
                [106.621895,35.20244],
                [106.621988,35.20246],
                [106.622083,35.20249],
                [106.622178,35.20252],
                [106.622273,35.20254],
                [106.622372,35.20256],
                [106.622468,35.20259],
                [106.622567,35.20261],
                [106.622663,35.20263],
                [106.622762,35.20265],
                [106.62286,35.202672],
                [106.622958,35.20269],
                [106.623057,35.20271],
                [106.623157,35.20273],
                [106.623257,35.20275],
                [106.623357,35.20278],
                [106.623457,35.20280],
                [106.623557,35.20282],
                [106.623658,35.20285],
                [106.623758,35.20287],
                [106.62386,35.2029  ],
                [106.62396,35.202925],
                [106.624062,35.20295],
                [106.624165,35.20297],
                [106.624268,35.20299],
                [106.624372,35.20301],
                [106.624477,35.20302],
                [106.624582,35.20303],
                [106.624688,35.20304],
                [106.624797,35.20305],
                [106.6249,35.20305  ],
                [106.625007,35.20304],
                [106.625113,35.20303],
                [106.625223,35.20302],
                [106.625333,35.20300],
                [106.625445,35.20298],
                [106.625558,35.20296],
                [106.625675,35.20294],
                [106.625792,35.20292],
                [106.625908,35.20290],
                [106.626025,35.20288],
                [106.626142,35.20286],
                [106.626257,35.20283],
                [106.62637,35.20281 ],
                [106.626485,35.20278],
                [106.6266,35.202762 ],
                [106.626715,35.20273],
                [106.62683,35.202713],
                [106.626947,35.20269],
                [106.627062,35.20266],
                [106.627175,35.20264],
                [106.627288,35.20262],
                [106.6274,35.202608 ],
                [106.627512,35.20259],
                [106.627622,35.20257],
                [106.627732,35.20255],
                [106.627848,35.20255],
                [106.627968,35.20254],
                [106.628087,35.20255],
                [106.628183,35.20257],
                [106.628285,35.20260],
                [106.628373,35.20262],
                [106.628487,35.20264],
                [106.628575,35.20267],
                [106.628675,35.20271],
                [106.628777,35.20274],
                [106.628873,35.20277],
                [106.62897,35.202808],
                [106.629073,35.20283],
                [106.629187,35.20286],
                [106.629302,35.20289],
                [106.62942,35.202922],
                [106.629533,35.20295],
                [106.629647,35.20298],
                [106.629758,35.20300],
                [106.629872,35.20303],
                [106.629987,35.20306],
                [106.630093,35.20307],
                [106.630208,35.20309],
                [106.630312,35.20309],
                [106.63042,35.203117],
                [106.630525,35.20313],
                [106.630633,35.20315],
                [106.630738,35.20317],
                [106.63084,35.203188],
                [106.630945,35.20320],
                [106.631055,35.20322],
                [106.631165,35.20324],
                [106.631273,35.20327],
                [106.631393,35.20329],
                [106.631505,35.20331],
                [106.631613,35.20334],
                [106.631722,35.20337],
                [106.631832,35.2034 ],
                [106.631952,35.20342],
                [106.632068,35.20345],
                [106.63218,35.203483],
                [106.632288,35.20350],
                [106.632387,35.20351],
                [106.632502,35.20354],
                [106.632612,35.20357],
                [106.632732,35.20361],
                [106.632847,35.20364],
                [106.632962,35.20366],
                [106.633077,35.20369],
                [106.63319,35.203733],
                [106.6333,35.203762 ],
                [106.633415,35.20379],
                [106.63353,35.203827],
                [106.633642,35.20385],
                [106.633757,35.20389],
                [106.633872,35.20392],
                [106.633987,35.20396],
                [106.634103,35.20399],
                [106.634218,35.20403],
                [106.634333,35.20406],
                [106.634448,35.20409],
                [106.634563,35.20413],
                [106.634678,35.20417],
                [106.634793,35.20420],
                [106.634908,35.20424],
                [106.635025,35.20428],
                [106.635142,35.20432],
                [106.635258,35.20435],
                [106.635377,35.20439],
                [106.635495,35.20443],
                [106.635613,35.20446],
                [106.635733,35.2045 ],
                [106.635855,35.20453],
                [106.635977,35.20457],
                [106.636098,35.20461],
                [106.636222,35.20465],
                [106.636345,35.20468],
                [106.636467,35.20472],
                [106.636588,35.20476],
                [106.636708,35.20480],
                [106.636825,35.20483],
                [106.636932,35.20485],
                [106.637025,35.20488],
                [106.637103,35.20492],
                [106.637173,35.20496],
                [106.637237,35.205  ],
                [106.637298,35.20504],
                [106.637362,35.20508],
                [106.637427,35.20512],
                [106.63749,35.205173],
                [106.637548,35.20522],
                [106.637598,35.20526],
                [106.637642,35.20530],
                [106.637678,35.20533],
                [106.637708,35.20535],
                [106.637733,35.20537],
                [106.637755,35.20539],
                [106.637775,35.20542],
                [106.637802,35.20544],
                [106.637827,35.20546],
                [106.637855,35.20548],
                [106.63789,35.205508],
                [106.63793,35.205532],
                [106.637982,35.20556],
                [106.638035,35.20559],
                [106.638097,35.20561],
                [106.638163,35.20564],
                [106.638237,35.20566],
                [106.638313,35.20569],
                [106.63839,35.205717],
                [106.638467,35.20574],
                [106.638547,35.20576],
                [106.638627,35.20578],
                [106.638707,35.20580],
                [106.638788,35.20583],
                [106.63887,35.205857],
                [106.638953,35.20588],
                [106.639037,35.20590],
                [106.639123,35.20593],
                [106.639212,35.20596],
                [106.639302,35.20598],
                [106.639392,35.20601],
                [106.639485,35.20604],
                [106.639578,35.20606],
                [106.639672,35.20609],
                [106.639765,35.20612],
                [106.639862,35.20615],
                [106.639957,35.20618],
                [106.640055,35.20621],
                [106.640152,35.20624],
                [106.640248,35.20628],
                [106.640347,35.20631],
                [106.640447,35.20634],
                [106.640545,35.20637],
                [106.640647,35.20641],
                [106.640748,35.20644],
                [106.640852,35.20647],
                [106.640953,35.20650],
                [106.641057,35.20653],
                [106.641158,35.20656],
                [106.64126,35.206598],
                [106.641363,35.20663],
                [106.641465,35.20666]
            ]
        ]

        var transGpsData = [];
        for(var i = 0; i < gpsData0.length; i++){
            transGpsData.push([]);
            for(var j = 0; j < gpsData0[i].length; j++){
                var tempgps = coordtransform.wgs84togcj02(gpsData0[i][j][0],gpsData0[i][j][1]);
                transGpsData[i].push(coordtransform.gcj02tobd09(tempgps[0], tempgps[1]));
            }
        }

        var busLines = [{
            coords: transGpsData[0],
            lineStyle: {
                normal: {
                    color: echarts.color.modifyHSL('#08B217', Math.round(400))
                }
            }
        },
        {
            coords: transGpsData[1],
            lineStyle: {
                normal: {
                    color: echarts.color.modifyHSL('#08B217', Math.round(200))
                }
            }
        }];
        
        myChart.setOption(option = {
            bmap: {
                center: center0,
                zoom: 15,
                roam: true,
            },
            series: [{
                type: 'lines',
                coordinateSystem: 'bmap',
                polyline: true,
                data: busLines,
                silent: true,
                lineStyle: {
                    normal: {
                        opacity: 0.3,
                        width: 3.5
                    }
                },
                progressiveThreshold: 500,
                progressive: 200
            }, {
                type: 'lines',
                coordinateSystem: 'bmap',
                polyline: true,
                data: busLines,
                lineStyle: {
                    normal: {
                        width: 0
                    }
                },
                effect: {
                    constantSpeed: 50,
                    show: true,
                    trailLength: 0.5,
                    symbolSize: 2
                },
                zlevel: 1
            }]
            });
        
        //获取百度地图底图对象
        var ecModel = myChart._model;
        var bmap = null;
        ecModel.eachComponent('bmap', function (bmapModel) {			
            if(bmap == null){
                bmap = bmapModel.__bmap;
            }
        });
        //利用百度地图对象添加控件
        bmap.addControl(new BMap.NavigationControl());

        //利用百度地图对象添加图层
        var ctrl = new BMapLib.TrafficControl({
		showPanel: false //是否显示路况提示面板
        });      
        bmap.addControl(ctrl);
        ctrl.setAnchor(BMAP_ANCHOR_BOTTOM_RIGHT);
       </script>
   </body>
</html>